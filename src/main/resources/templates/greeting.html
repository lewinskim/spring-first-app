<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Gretting Started: Serving Web Content</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<body>
<p th:text="'Hello, ' + ${name} + '!'"></p>
<h3>----history fetched with thymeleaf----</h3>
<form method="POST" th:object="${greetingsForRemoval}">
    <div th:each="history : ${history}">
        <input name="id" th:value="${history.id}"/>
        <input name="name" th:value="${history.name}"/>
        <input name="greetings" type="checkbox" th:value="${history.id}"/>
    </div>
    <br/>
    <button>Remove Selected Entries</button>
    </div>
</form>
<h3>----history fetched with javascript----</h3>

<div id="main"></div>

<script th:inline="javascript">

    /*<![CDATA[*/
    let historyList = /*[[${history}]]*/ "Test1";
    /*]]>*/
    let mainDiv = document.getElementById("main");
    for (i = 0; i < historyList.length; i++) {
        let t = document.createTextNode(historyList[i].id + ' ' + historyList[i].name);
        let p = document.createElement("input");
        p.name = t;
        p.value = (historyList[i].id + ' ' + historyList[i].name);
        mainDiv.appendChild(p);
        let btn = document.createElement("button");
        btn.innerHTML = "REMOVE";
        btn.name = historyList[i].name;
        btn.value = historyList[i].id;
        mainDiv.appendChild(btn);
        mainDiv.appendChild(document.createElement("br"))
    }

</script>
</body>
</html>