<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Gretting Started: Serving Web Content</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<body>
<p th:text="'Hello, ' + ${name} + '!'"></p>
<h3>----history with thymeleaf----</h3>
<form method="POST" th:object="${greetingsForRemoval}">
    <div th:each="history : ${history}">
        <input name="id" th:value="${history.id}"/>
        <input name="name" th:value="${history.name}"/>
        <input name ="greetings" type="checkbox" th:value="${history.id}"/>
    </div>
        <br/>
        <button>Remove Selected Entries</button>
    </div>
</form>
<h3>----history fetched with javascript----</h3>

<div id="main"></div>

<script th:inline="javascript">

/*<![CDATA[*/
  var historyList = /*[[${history}]]*/ "Test1";
/*]]>*/
 var mainDiv = document.getElementById("main");
 for(i=0; i<historyList.length; i++){
	 var t = document.createTextNode(historyList[i].id+' '+historyList[i].name);
	 var p = document.createElement("input");
	 p.name = t;
	 p.value = (historyList[i].id+' '+historyList[i].name);
	 mainDiv.appendChild(p);
	 var btn = document.createElement("button");
        btn.innerHTML = "REMOVE";
        mainDiv.appendChild(btn);
        mainDiv.appendChild(document.createElement("br"))
 }




</script>
</body>
</html>